# 计算机网络常见面试题

## 1、OSI与TCP/IP各层的结构与功能,都有哪些协议?

![image-20201105135453023](https://github.com/tz-feng/myStudy/blob/main/Typora-photos/计算机网络/image-20201105135453023.png)

每层的作用：

- **物理层**

  主要定义物理设备标准，例如网线的接口类型、光线的接口类型、各种传输介质的传输速率等。他的主要作用是传入比特流（就是由1、0转化为电流强弱来进行传输，到达目的地后再转化为1、0，也就是我们通常所说的数模转换与模数转换）。这一层的数据叫做比特流。

- **数据链路层**

  通过建立数据链路连接，采用差错控制和流量控制方法，是有差错的物理线路变成无差错的数据链路。数据传输的单位是帧。

- **网络层**

  通过路由选择算法为分组通过通信子网选择适当的传输路径，实现流量控制、拥塞控制和网络互联功能。数据传输单位是分组。

- **运输层**

  为分布在不同地理位置计算机的进程通信提供可靠的端-端连接和数据传输服务。数据传输单位是报文。

- **会话层**

  负责维护两个会话主机之间连接的建立、管理和终止，以及数据的交换。

- **表示层**

  负责通信系统之间的数据交换格式变换、数据加密与解密、数据压缩和恢复。

- **应用层**

  实现协同工作的应用程序之间的通信过程控制。



## 2、TCP 三次握手和四次挥手

- 三次握手

  第一次：客户端向服务器发送同步序列编号（syn），等待服务器确认。
  第二次：服务器收到syn时，确认同步，然后向客户端请求同步，所以发送了syn和ack给客户端。
  第三次：客户端收到服务器发送请求之后，向服务器发送回一个确认包（ack），让服务端知道可以进行连接了。

  ![三次握手](https://github.com/tz-feng/myStudy/blob/main/Typora-photos/计算机网络/image-20201105142404550.png)

- 四次挥手

  第一次：客户端发出连接释放报文（fin），并停止发送数据。
  第二次：服务器接收到了fin报文时，并不会直接关闭，而是要等报文都发送完了才关闭，所以只会向客户端发送一个ack包
  第三次：当服务器的所有报文都发送完毕后，服务端向客户端发送一个fin包。
  第四次：收到服务器的fin包后，向服务器发送回一个ack包，连接断开。

  ![image-20201105142453867](https://github.com/tz-feng/myStudy/blob/main/Typora-photos/计算机网络/image-20201105142453867.png)



**拓展：如果已经建立了连接，但是客户端突然出现故障了怎么办？**

TCP还设有一个保活计时器，如果服务器每收到一次客户端的请求，那么该计时器就会复位。时间通常设置为2小时，如果2小时内没有收到客户端的任何数据，那么服务器就会发送一个探测报文段，以后每隔75秒钟就发送一次，若连续发送10次都没反应，那么服务器就认为客户端出现故障，接着就关闭连接。



## 3、TCP,UDP 协议的区别

- UDP是无连接；TCP是面向连接
- UDP是传输不可靠的，不适用流浪控制与拥塞控制；TCP是传输可靠的，使用流量控制与拥塞控制
- UDP支持一对一，一对多，多对一和多对多交互通信；TCP只支持一对一通信
- UDP是面向报文的；TCP是面向字节流的



## 4、在浏览器中输入url地址------>显示主页的过程

总体分为以下几个过程：

- **DNS解析**

  DNS解析的过程就是寻找哪台服务器上有你需要的资源的过程。DNS解析是一个递归查询的过程。首先主机会在本地域名服务器中查询地址，如果没有找到，本地域名服务器就会向根域名服务器发送请求，如果根域名服务器也找不到，那么就会再向下一级域名服务器发送请求，直到得到对应IP地址后，会将其IP地址存放到本地缓存中，以便下一次使用。

- **TCP连接**

  TCP的三次握手

- **发送HTTP请求**

  发送HTTP请求的过程就是构建HTTP请求报文并通过TCP协议中发送到服务器指定端口(HTTP协议80/8080, HTTPS协议443)。HTTP请求报文是由三部分组成: 请求行、请求报头和请求正文。

- **服务器处理请求并返回HTTP报文**

  后端从在固定的端口接收到TCP报文开始，这一部分对应于编程语言中的socket。它会对TCP连接进行处理，对HTTP协议进行解析，并按照报文格式进一步封装成HTTP Request对象，供上层使用。HTTP响应报文也由三部分组成：状态码、响应报头、响应报文

- **浏览器解析渲染页面**

  浏览器是一个边解析边渲染的过程。首先浏览器解析HTML文件构建DOM树，然后解析CSS文件构建渲染树，等到渲染树构建完成后，浏览器开始布局渲染树并将其绘制到屏幕上。

- **断开连接**

  TCP的四次挥手



## 5、状态码

|      | 类别                        | 原因                               |
| ---- | --------------------------- | ---------------------------------- |
| 1xx  | Information（信息性状态码） | 接受的请求正在处理                 |
| 2xx  | Success（成功状态码）       | 请求正常处理完毕                   |
| 3xx  | Redirection（重定向）       | 需要进行附加操作以完成请求         |
| 4xx  | Client error（客户端错误）  | 客户端请求出错，服务器无法处理请求 |
| 5xx  | Server error（服务器错误）  | 服务器处理请求出错                 |

常见的状态码：

**200 OK：**表示从客户端发送给服务器的请求被正常处理并返回；

**204 No Content：**表示客户端发送给客户端的请求得到了成功处理，但在返回的响应报文中不含实体的主体部分（没有资源可以返回）；

**206 Patial Content：**表示客户端进行了范围请求，并且服务器成功执行了这部分的GET请求，响应报文中包含由Content-Range指定范围的实体内容。

**301 Moved Permanently：**永久性重定向，表示请求的资源被分配了新的URL，之后应使用更改的URL；

**302 Found：**临时性重定向，表示请求的资源被分配了新的URL，希望本次访问使用新的URL；

​	==**301与302的区别：前者是永久移动，后者是临时移动（之后可能还会更改URL）**==

**303 See Other：**表示请求的资源被分配了新的URL，应使用GET方法定向获取请求的资源；

​	==**302与303的区别：后者明确表示客户端应当采用GET方式获取资源**==

**304 Not Modified：**表示客户端发送附带条件（是指采用GET方法的请求报文中包含if-Match、If-Modified-Since、If-None-Match、If-Range、If-Unmodified-Since中任一首部）的请求时，服务器端允许访问资源，但是请求为满足条件的情况下返回改状态码；

**307 Temporary Redirect：**临时重定向，与303有着相同的含义，307会遵照浏览器标准不会从POST变成GET；（不同浏览器可能会出现不同的情况）

**400 Bad Request：**表示请求报文中存在语法错误；

**401 Unauthorized：**未经许可，需要通过HTTP认证；

**403 Forbidden：**服务器拒绝该次访问（访问权限出现问题）

**404 Not Found：**表示服务器上无法找到请求的资源，除此之外，也可以在服务器拒绝请求但不想给拒绝原因时使用；

**500 Inter Server Error：**表示服务器在执行请求时发生了错误，也有可能是web应用存在的bug或某些临时的错误时；

**503 Server Unavailable：**表示服务器暂时处于超负载或正在进行停机维护，无法处理请求；



## 6、HTTP长连接,短连接

在HTTP/1.0中默认使用短连接。也就是说，客户端和服务器每进行一次HTTP操作，就建立一次连接，任务结束就中断连接。

而从HTTP/1.1起，默认使用长连接，用以保持连接特性。使用长连接的HTTP协议。

在使用长连接的情况下，当一个网页打开完成后，客户端和服务器之间用于传输HTTP数据的TCP连接不会关闭，客户端再次访问这个服务器时，会继续使用这一条已经建立的连接。Keep-Alive不会永久保持连接，它有一个保持时间，可以在不同的服务器软件（如Apache）中设定这个时间。实现长连接需要客户端和服务端都支持长连接。



## 7、Cookie的作用是什么?和Session有什么区别

Cookie实际上是一**小段的文本信息**。客户端请求服务器，如果服务器需要记录该用户状态，就使用response向客户端浏览器颁发一个Cookie。客户端会把Cookie保存起来。当浏览器再请求该网站时，浏览器把请求的网址连同该Cookie一同提交给服务器。服务器检查该Cookie，以此来辨认用户状态。

Session是另一种记**录客户状态的机制**，不同的是Cookie保存在客户端浏览器中，而Session保存在服务器上。客户端浏览器访问服务器的时候，服务器把客户端信息以某种形式记录在服务器上。这就是Session。客户端浏览器再次访问时只需要从该Session中查找该客户的状态就可以了。**用户与服务器建立连接的同时，服务器会自动为其分配一个SessionId。**

区别：

- 数据存储的位置：cookie数据存放在**客户的浏览器**上；session数据放在**服务器**上。
- 安全性：cookie**不是很安全**，别人可以分析存放在本地的cookie并进行cookie欺骗，考虑到安全应当使用session。
- 服务器性能：session会在一定时间内保存在服务器上。当访问增多，会比较占用你服务器的性能，考虑到减轻服务器性能方面，应当使用cookie。
- 数据大小：单个cookie保存的数据不能超过4K，很多浏览器都限制一个站点最多保存20个cookie。
- 信息重要程度：可以考虑将登陆信息等**重要信息**存放为session，**其他信息**如果需要保留，可以放在cookie中。



## 8、HTTP 和 HTTPS 的区别

- 端口：http默认使用的是80端口；https默认使用的是443端口。
- 安全性：http使用的是明文传输，不安全；https实际上是http+安全协议（SSL/TLS），所有的传输内容都经过加密，比较安全。